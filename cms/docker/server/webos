FROM node:14
MAINTAINER TH2 Alex

EXPOSE 8080
EXPOSE 3000

WORKDIR /home/app/

RUN npm update
COPY controllers/package.json /home/app/controllers/package.json
COPY controllers/package-lock.json /home/app/controllers/package-lock.json

WORKDIR /home/app/controllers/

RUN npm install

WORKDIR /home/app/

COPY tmp/views/ /home/app/views/


COPY controllers/api/ /home/app/controllers/api/
COPY controllers/index.js /home/app/controllers/index.js
COPY controllers/auth/ /home/app/controllers/auth/

WORKDIR /home/app/controllers/

CMD ["node", "index.js"]
